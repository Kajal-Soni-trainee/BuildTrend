{"ast":null,"code":"import { useStore } from \"vuex\";\nimport { computed, onMounted, ref, reactive } from \"vue\";\nimport { axiosGet, axiosPost } from \"@/services/service\";\nexport default {\n  __name: 'workProofForm',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const selectedJobs = computed(() => {\n      return store.state.contractor.allJobs;\n    });\n    const workProofData = reactive({\n      description: null,\n      images: null,\n      job_category_id: null\n    });\n    const jobCatogories = ref(null);\n    const dialog = ref(false);\n    async function getCategories(job_id) {\n      const result = await axiosGet(`/getCategories/?job_id=${job_id}`);\n      jobCatogories.value = result.data;\n      dialog.value = true;\n    }\n    async function submit(job_id) {\n      const formData = new FormData();\n      workProofData.images.forEach(image => {\n        formData.append(\"files\", image);\n      });\n      formData.append(\"job_id\", job_id);\n      formData.append(\"job_category_id\", workProofData.job_category_id);\n      formData.append(\"description\", workProofData.description);\n      const result = await axiosPost(\"/addWorkProof\", formData);\n      console.log(result.data);\n    }\n    onMounted(async () => {\n      store.dispatch(\"triggerSetSelectedJobs\");\n      console.log(selectedJobs.value);\n      console.log(jobCatogories.value);\n    });\n    const __returned__ = {\n      store,\n      selectedJobs,\n      workProofData,\n      jobCatogories,\n      dialog,\n      getCategories,\n      submit,\n      get useStore() {\n        return useStore;\n      },\n      computed,\n      onMounted,\n      ref,\n      reactive,\n      get axiosGet() {\n        return axiosGet;\n      },\n      get axiosPost() {\n        return axiosPost;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["useStore","computed","onMounted","ref","reactive","axiosGet","axiosPost","store","selectedJobs","state","contractor","allJobs","workProofData","description","images","job_category_id","jobCatogories","dialog","getCategories","job_id","result","value","data","submit","formData","FormData","forEach","image","append","console","log","dispatch"],"sources":["/home/kajal-soni/Documents/VueJs/buildtrend/frontend/src/components/workProofForm.vue"],"sourcesContent":["<template>\n  <v-container class=\"d-flex flex-row justify-center align-center\">\n    <p v-if=\"allJobs.length == 0\" class=\"text-red text-h2 text-center\">\n      No Property Added\n    </p>\n    <div class=\"d-flex flex-column justify-center align-center ga-5\" v-else>\n      <v-card\n        style=\"width: 1000px\"\n        v-for=\"item in allJobs\"\n        :key=\"item.job_id\"\n        :elevation=\"12\"\n      >\n        <v-card-title class=\"text-h4\">{{ item.u_name }}</v-card-title>\n        <v-card-subtitle class=\"text-h6\">{{ item.u_email }}</v-card-subtitle>\n        <v-card-item class=\"text-h5\">{{ item.property_name }}</v-card-item>\n        <v-card-item class=\"text-h5\">{{ item.property_address }}</v-card-item>\n        <v-btn class=\"bg-teal-darken-4 ma-5\" @click=\"getCategories(item.job_id)\"\n          >Add Proof</v-btn\n        >\n        <v-dialog v-model=\"dialog\" width=\"auto\">\n          <v-card width=\"600px\" class=\"pa-5\">\n            <v-textarea\n              v-model=\"workProofData.description\"\n              variant=\"solo-filled\"\n              label=\"Description\"\n            ></v-textarea>\n            <v-select\n              variant=\"solo-filled\"\n              label=\"Categories\"\n              v-model=\"workProofData.job_category_id\"\n              :items=\"jobCatogories\"\n              item-title=\"title\"\n              item-value=\"job_category_id\"\n            >\n            </v-select>\n            <v-file-input\n              label=\"Images\"\n              variant=\"solo-filled\"\n              multiple\n              prepend-inner-icon=\"mdi-camera\"\n              v-model=\"workProofData.images\"\n            ></v-file-input>\n            <template v-slot:actions>\n              <v-btn class=\"bg-teal-darken-4\" @click=\"dialog = false\"\n                >close</v-btn\n              >\n              <v-btn class=\"bg-teal-darken-4\" @click=\"submit(item.job_id)\"\n                >Submit</v-btn\n              >\n            </template>\n          </v-card>\n        </v-dialog>\n      </v-card>\n    </div>\n  </v-container>\n</template>\n<script setup>\nimport { useStore } from \"vuex\";\nimport { computed, onMounted, ref, reactive } from \"vue\";\nimport { axiosGet, axiosPost } from \"@/services/service\";\nconst store = useStore();\nconst selectedJobs = computed(() => {\n  return store.state.contractor.allJobs;\n});\nconst workProofData = reactive({\n  description: null,\n  images: null,\n  job_category_id: null,\n});\nconst jobCatogories = ref(null);\nconst dialog = ref(false);\nasync function getCategories(job_id) {\n  const result = await axiosGet(`/getCategories/?job_id=${job_id}`);\n  jobCatogories.value = result.data;\n  dialog.value = true;\n}\n\nasync function submit(job_id) {\n  const formData = new FormData();\n  workProofData.images.forEach((image) => {\n    formData.append(\"files\", image);\n  });\n  formData.append(\"job_id\", job_id);\n  formData.append(\"job_category_id\", workProofData.job_category_id);\n  formData.append(\"description\", workProofData.description);\n  const result = await axiosPost(\"/addWorkProof\", formData);\n  console.log(result.data);\n}\n\nonMounted(async () => {\n  store.dispatch(\"triggerSetSelectedJobs\");\n  console.log(selectedJobs.value);\n  console.log(jobCatogories.value);\n});\n</script>\n<style scoped></style>\n"],"mappings":"AAyDA,SAASA,QAAQ,QAAQ,MAAM;AAC/B,SAASC,QAAQ,EAAEC,SAAS,EAAEC,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AACxD,SAASC,QAAQ,EAAEC,SAAS,QAAQ,oBAAoB;;;;;;;IACxD,MAAMC,KAAK,GAAGP,QAAQ,CAAC,CAAC;IACxB,MAAMQ,YAAY,GAAGP,QAAQ,CAAC,MAAM;MAClC,OAAOM,KAAK,CAACE,KAAK,CAACC,UAAU,CAACC,OAAO;IACvC,CAAC,CAAC;IACF,MAAMC,aAAa,GAAGR,QAAQ,CAAC;MAC7BS,WAAW,EAAE,IAAI;MACjBC,MAAM,EAAE,IAAI;MACZC,eAAe,EAAE;IACnB,CAAC,CAAC;IACF,MAAMC,aAAa,GAAGb,GAAG,CAAC,IAAI,CAAC;IAC/B,MAAMc,MAAM,GAAGd,GAAG,CAAC,KAAK,CAAC;IACzB,eAAee,aAAaA,CAACC,MAAM,EAAE;MACnC,MAAMC,MAAM,GAAG,MAAMf,QAAQ,CAAC,0BAA0Bc,MAAM,EAAE,CAAC;MACjEH,aAAa,CAACK,KAAK,GAAGD,MAAM,CAACE,IAAI;MACjCL,MAAM,CAACI,KAAK,GAAG,IAAI;IACrB;IAEA,eAAeE,MAAMA,CAACJ,MAAM,EAAE;MAC5B,MAAMK,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/Bb,aAAa,CAACE,MAAM,CAACY,OAAO,CAAEC,KAAK,IAAK;QACtCH,QAAQ,CAACI,MAAM,CAAC,OAAO,EAAED,KAAK,CAAC;MACjC,CAAC,CAAC;MACFH,QAAQ,CAACI,MAAM,CAAC,QAAQ,EAAET,MAAM,CAAC;MACjCK,QAAQ,CAACI,MAAM,CAAC,iBAAiB,EAAEhB,aAAa,CAACG,eAAe,CAAC;MACjES,QAAQ,CAACI,MAAM,CAAC,aAAa,EAAEhB,aAAa,CAACC,WAAW,CAAC;MACzD,MAAMO,MAAM,GAAG,MAAMd,SAAS,CAAC,eAAe,EAAEkB,QAAQ,CAAC;MACzDK,OAAO,CAACC,GAAG,CAACV,MAAM,CAACE,IAAI,CAAC;IAC1B;IAEApB,SAAS,CAAC,YAAY;MACpBK,KAAK,CAACwB,QAAQ,CAAC,wBAAwB,CAAC;MACxCF,OAAO,CAACC,GAAG,CAACtB,YAAY,CAACa,KAAK,CAAC;MAC/BQ,OAAO,CAACC,GAAG,CAACd,aAAa,CAACK,KAAK,CAAC;IAClC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}